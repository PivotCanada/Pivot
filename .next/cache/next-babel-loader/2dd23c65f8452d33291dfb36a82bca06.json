{"ast":null,"code":"var _jsxFileName = \"/Users/dalyanparker/Programming/Applications/pivot-front-end/components/Profile/Follow.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useContext, useEffect, useState, useCallback } from \"react\";\nimport { UserContext } from \"../../contexts/UserContext\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Button } from \"@material-ui/core\"; // TODO : Refactor ...\n\nconst Follow = ({\n  profile\n}) => {\n  const {\n    user,\n    setUser,\n    authenticated\n  } = useContext(UserContext);\n  const {\n    0: followed,\n    1: setFollowed\n  } = useState(false);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true); // TODO : FIX THIS !!!\n\n  const sameUser = user ? user._id == profile._id : false; // TODO : Fix this shittt ...\n\n  console.log(authenticated);\n  console.log(sameUser); //   console.log(profile);\n  //   console.log(user);\n\n  const checkFollowed = async (user, profile) => {\n    if (user) {\n      user.following.forEach(u => {\n        if (u._id === profile._id) {\n          setFollowed(true);\n        }\n      });\n      setLoading(false);\n    }\n  };\n\n  const onSubmit = async (user, profile, followed) => {\n    console.log(followed);\n    setFollowed(f => !f);\n    await follow(user, profile, followed).then(async response => {\n      console.log(response);\n\n      if (response.status === \"success\") {\n        // TODO : FIX THIS !!!\n        setUser(response.data);\n        followed_by(user, profile, followed).then(async response => {\n          console.log(response);\n\n          if (response.status === \"success\") {}\n        });\n      }\n    });\n  };\n\n  const follow = async (user, profile, followed) => {\n    let url = \"\";\n\n    if (followed) {\n      url = `https://pivotinfo.herokuapp.com/api/users/unfollow/${user._id}`;\n    } else {\n      url = `https://pivotinfo.herokuapp.com/api/users/follow/${user._id}`;\n    }\n\n    const req = await fetch(url, {\n      method: \"PUT\",\n      mode: \"cors\",\n      // no-cors, *cors, same-origin,\n      // headers field seems to be essential ?\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        user: {\n          _id: profile._id,\n          firstname: profile.firstname,\n          lastname: profile.lastname,\n          photo: profile.photo,\n          location: profile.location,\n          industry: profile.industry,\n          website: profile.website\n        }\n      })\n    });\n    return await req.json();\n  };\n\n  const followed_by = async (user, profile, followed) => {\n    let url = \"\";\n\n    if (followed) {\n      url = `https://pivotinfo.herokuapp.com/api/users/unfollowed/${profile._id}`;\n    } else {\n      url = `https://pivotinfo.herokuapp.com/api/users/followed/${profile._id}`;\n    }\n\n    const req = await fetch(url, {\n      method: \"PUT\",\n      mode: \"cors\",\n      // no-cors, *cors, same-origin,\n      // headers field seems to be essential ?\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        user: {\n          _id: user._id,\n          firstname: user.firstname,\n          lastname: user.lastname,\n          photo: user.photo,\n          location: user.location,\n          industry: user.industry,\n          website: user.website\n        }\n      })\n    });\n    return await req.json();\n  }; //   console.log(checkFollowed(user, profile));\n\n\n  useEffect(() => {\n    checkFollowed(user, profile);\n  }, [user]);\n\n  if (!authenticated || sameUser) {\n    return null;\n  } else {\n    return __jsx(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      style: {\n        width: 100,\n        textTransform: \"none\",\n        marginTop: 20,\n        width: \"100%\",\n        fontFamily: \"Noto Sans, sans-serif\",\n        fontWeight: 500,\n        borderRadius: 2\n      },\n      onClick: () => onSubmit(user, profile, followed),\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 7\n      }\n    }, followed ? \"UnFollow\" : \"Follow\");\n  }\n};\n\nexport default Follow;","map":{"version":3,"sources":["/Users/dalyanparker/Programming/Applications/pivot-front-end/components/Profile/Follow.js"],"names":["useContext","useEffect","useState","useCallback","UserContext","makeStyles","Button","Follow","profile","user","setUser","authenticated","followed","setFollowed","loading","setLoading","sameUser","_id","console","log","checkFollowed","following","forEach","u","onSubmit","f","follow","then","response","status","data","followed_by","url","req","fetch","method","mode","headers","body","JSON","stringify","firstname","lastname","photo","location","industry","website","json","width","textTransform","marginTop","fontFamily","fontWeight","borderRadius"],"mappings":"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","sourcesContent":["import { useContext, useEffect, useState, useCallback } from \"react\";\nimport { UserContext } from \"../../contexts/UserContext\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Button } from \"@material-ui/core\";\n\n// TODO : Refactor ...\n\nconst Follow = ({ profile }) => {\n  const { user, setUser, authenticated } = useContext(UserContext);\n\n  const [followed, setFollowed] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  // TODO : FIX THIS !!!\n\n  const sameUser = user ? user._id == profile._id : false;\n\n  // TODO : Fix this shittt ...\n\n  console.log(authenticated);\n  console.log(sameUser);\n\n  //   console.log(profile);\n  //   console.log(user);\n\n  const checkFollowed = async (user, profile) => {\n    if (user) {\n      user.following.forEach((u) => {\n        if (u._id === profile._id) {\n          setFollowed(true);\n        }\n      });\n      setLoading(false);\n    }\n  };\n\n  const onSubmit = async (user, profile, followed) => {\n    console.log(followed);\n    setFollowed((f) => !f);\n\n    await follow(user, profile, followed).then(async (response) => {\n      console.log(response);\n      if (response.status === \"success\") {\n        // TODO : FIX THIS !!!\n        setUser(response.data);\n        followed_by(user, profile, followed).then(async (response) => {\n          console.log(response);\n          if (response.status === \"success\") {\n          }\n        });\n      }\n    });\n  };\n\n  const follow = async (user, profile, followed) => {\n    let url = \"\";\n\n    if (followed) {\n      url = `https://pivotinfo.herokuapp.com/api/users/unfollow/${user._id}`;\n    } else {\n      url = `https://pivotinfo.herokuapp.com/api/users/follow/${user._id}`;\n    }\n\n    const req = await fetch(url, {\n      method: \"PUT\",\n      mode: \"cors\", // no-cors, *cors, same-origin,\n      // headers field seems to be essential ?\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        user: {\n          _id: profile._id,\n          firstname: profile.firstname,\n          lastname: profile.lastname,\n          photo: profile.photo,\n          location: profile.location,\n          industry: profile.industry,\n          website: profile.website,\n        },\n      }),\n    });\n\n    return await req.json();\n  };\n\n  const followed_by = async (user, profile, followed) => {\n    let url = \"\";\n\n    if (followed) {\n      url = `https://pivotinfo.herokuapp.com/api/users/unfollowed/${profile._id}`;\n    } else {\n      url = `https://pivotinfo.herokuapp.com/api/users/followed/${profile._id}`;\n    }\n\n    const req = await fetch(url, {\n      method: \"PUT\",\n      mode: \"cors\", // no-cors, *cors, same-origin,\n      // headers field seems to be essential ?\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        user: {\n          _id: user._id,\n          firstname: user.firstname,\n          lastname: user.lastname,\n          photo: user.photo,\n          location: user.location,\n          industry: user.industry,\n          website: user.website,\n        },\n      }),\n    });\n\n    return await req.json();\n  };\n\n  //   console.log(checkFollowed(user, profile));\n\n  useEffect(() => {\n    checkFollowed(user, profile);\n  }, [user]);\n\n  if (!authenticated || sameUser) {\n    return null;\n  } else {\n    return (\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        style={{\n          width: 100,\n          textTransform: \"none\",\n          marginTop: 20,\n          width: \"100%\",\n          fontFamily: \"Noto Sans, sans-serif\",\n          fontWeight: 500,\n          borderRadius: 2,\n        }}\n        onClick={() => onSubmit(user, profile, followed)}\n        type=\"button\"\n      >\n        {followed ? \"UnFollow\" : \"Follow\"}\n      </Button>\n    );\n  }\n};\n\nexport default Follow;\n"]},"metadata":{},"sourceType":"module"}