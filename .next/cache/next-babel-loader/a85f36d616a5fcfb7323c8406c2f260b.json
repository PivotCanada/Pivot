{"ast":null,"code":"var _jsxFileName = \"/Users/dalyanparker/Programming/Applications/pivot-front-end/components/SignUpV2/Submit.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState, useContext } from \"react\";\nimport Router from \"next/router\"; // Validation\n\nimport { validateDetails } from \"../../utils/validation/validateDetails\";\nimport { incrementForm } from \"../../utils/validation/incrementForm\"; // Material UI\n\nimport { makeStyles } from \"@material-ui/core/styles\"; // Components\n// Contexts\n\nimport { UserContext } from \"../../contexts/UserContext\";\nimport { ModalContext } from \"../../contexts/ModalContext\"; // Utils\n\nimport { authenticate } from \"../../utils/authentication/authenticate\";\nimport { signup } from \"./utils/signup\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      minHeight: \"80vh\",\n      overflow: \"scroll\"\n    },\n    textField: {\n      width: \"17rem\",\n      marginTop: \"4rem\",\n      flexGrow: 1,\n      flexShrink: 1\n    },\n    innerWrapper: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\",\n      alignItems: \"center\"\n    },\n    header: {\n      textAlign: \"center\",\n      margin: 0,\n      fontWeight: 500,\n      fontFamily: \"Open Sans, sans-serif\"\n    },\n    text: {\n      textAlign: \"center\",\n      width: \"17rem\",\n      margin: 0,\n      marginTop: 35,\n      fontWeight: 500,\n      fontSize: 16,\n      fontFamily: \"Open Sans, sans-serif\"\n    },\n    email: {\n      textAlign: \"center\",\n      width: \"17rem\",\n      margin: 0,\n      marginTop: 30,\n      fontWeight: 700,\n      fontSize: 18,\n      fontFamily: \"Open Sans, sans-serif\"\n    },\n    button: {\n      marginTop: \"3rem\",\n      marginBottom: \"3rem\"\n    }\n  };\n});\n\nfunction Submit(_ref) {\n  _s();\n\n  var values = _ref.values,\n      submitting = _ref.submitting,\n      setSubmitting = _ref.setSubmitting;\n\n  var _useContext = useContext(UserContext),\n      setUser = _useContext.setUser,\n      setAuthenticated = _useContext.setAuthenticated,\n      setToken = _useContext.setToken;\n\n  var _useContext2 = useContext(ModalContext),\n      setShowLogin = _useContext2.setShowLogin,\n      setShowOnboard = _useContext2.setShowOnboard;\n\n  var _useState = useState({\n    value: false,\n    message: \"\"\n  }),\n      error = _useState[0],\n      setError = _useState[1];\n\n  var data = {\n    email: values.email,\n    password: values.password,\n    firstname: values.firstname,\n    lastname: values.lastname,\n    business: values.business,\n    industry: values.industry,\n    location: values.location,\n    years: values.years,\n    hasSite: values.hasSite,\n    website: values.website,\n    achievements: values.achievements,\n    goals: values.goals,\n    challenges: values.challenges,\n    wish: values.wish\n  };\n  useEffect(function () {\n    setSubmitting(true); // NOTE : reroute to `/home` upon sucessful login\n    // TODO : configure functionality here for `persisted state` later on ...\n\n    signup(data).then(function (response) {\n      console.log(response); // NOTE : check that response is successful\n\n      if (response.status === \"success\") {\n        authenticate({\n          email: data.email,\n          password: data.password\n        }).then(function (response) {\n          if (response.status === \"success\") {\n            // NOTE : set `token`, `user`, `authenticated` state, in UserContext, upon sucessful login\n            setToken(response.data.token);\n            setUser(response.data.user);\n            setAuthenticated(true);\n            setShowOnboard(false);\n            setShowLogin(false);\n            console.log(response.data);\n            Router.push(\"/\");\n          } else {\n            console.log(response);\n            setError({\n              value: true,\n              message: response.message\n            });\n            setToken(null);\n            setAuthenticated(false);\n            setSubmitting(false);\n          }\n        });\n      } else {\n        console.log(response);\n        setError({\n          value: true,\n          message: response.message\n        });\n        setSubmitting(false);\n      }\n    });\n  }, []);\n  var classes = useStyles();\n\n  if (submitting) {\n    return __jsx(\"div\", {\n      className: classes.root,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      className: classes.innerWrapper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }\n    }, __jsx(\"h1\", {\n      className: classes.header,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }\n    }, \"Loading\"), __jsx(\"p\", {\n      className: classes.text,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 11\n      }\n    }, \"Just a Second!\")));\n  }\n\n  if (error.value) {\n    return __jsx(\"div\", {\n      className: classes.root,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      className: classes.innerWrapper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }\n    }, __jsx(\"h1\", {\n      className: classes.header,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }\n    }, \"Error\"), __jsx(\"p\", {\n      className: classes.text,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }\n    }, \"Something went slightly wrong, we will reach out to you by email shortly!\")));\n  } else {\n    return null;\n  }\n}\n\n_s(Submit, \"RNFdaT06dcvZIly7aDf4tUoIZ4o=\", false, function () {\n  return [useStyles];\n});\n\n_c = Submit;\nexport default Submit;\n\nvar _c;\n\n$RefreshReg$(_c, \"Submit\");","map":{"version":3,"sources":["/Users/dalyanparker/Programming/Applications/pivot-front-end/components/SignUpV2/Submit.js"],"names":["useEffect","useState","useContext","Router","validateDetails","incrementForm","makeStyles","UserContext","ModalContext","authenticate","signup","useStyles","theme","root","display","flexDirection","justifyContent","alignItems","minHeight","overflow","textField","width","marginTop","flexGrow","flexShrink","innerWrapper","header","textAlign","margin","fontWeight","fontFamily","text","fontSize","email","button","marginBottom","Submit","values","submitting","setSubmitting","setUser","setAuthenticated","setToken","setShowLogin","setShowOnboard","value","message","error","setError","data","password","firstname","lastname","business","industry","location","years","hasSite","website","achievements","goals","challenges","wish","then","response","console","log","status","token","user","push","classes"],"mappings":"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","sourcesContent":["import { useEffect, useState, useContext } from \"react\";\nimport Router from \"next/router\";\n// Validation\nimport { validateDetails } from \"../../utils/validation/validateDetails\";\nimport { incrementForm } from \"../../utils/validation/incrementForm\";\n// Material UI\nimport { makeStyles } from \"@material-ui/core/styles\";\n// Components\n// Contexts\nimport { UserContext } from \"../../contexts/UserContext\";\nimport { ModalContext } from \"../../contexts/ModalContext\";\n// Utils\nimport { authenticate } from \"../../utils/authentication/authenticate\";\nimport { signup } from \"./utils/signup\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    minHeight: \"80vh\",\n    overflow: \"scroll\",\n  },\n  textField: {\n    width: \"17rem\",\n    marginTop: \"4rem\",\n    flexGrow: 1,\n    flexShrink: 1,\n  },\n  innerWrapper: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  header: {\n    textAlign: \"center\",\n    margin: 0,\n    fontWeight: 500,\n    fontFamily: \"Open Sans, sans-serif\",\n  },\n  text: {\n    textAlign: \"center\",\n    width: \"17rem\",\n    margin: 0,\n    marginTop: 35,\n    fontWeight: 500,\n    fontSize: 16,\n    fontFamily: \"Open Sans, sans-serif\",\n  },\n  email: {\n    textAlign: \"center\",\n    width: \"17rem\",\n    margin: 0,\n    marginTop: 30,\n    fontWeight: 700,\n    fontSize: 18,\n    fontFamily: \"Open Sans, sans-serif\",\n  },\n\n  button: {\n    marginTop: \"3rem\",\n    marginBottom: \"3rem\",\n  },\n}));\n\nfunction Submit({ values, submitting, setSubmitting }) {\n  const { setUser, setAuthenticated, setToken } = useContext(UserContext);\n  const { setShowLogin, setShowOnboard } = useContext(ModalContext);\n  const [error, setError] = useState({ value: false, message: \"\" });\n  const data = {\n    email: values.email,\n    password: values.password,\n    firstname: values.firstname,\n    lastname: values.lastname,\n    business: values.business,\n    industry: values.industry,\n    location: values.location,\n    years: values.years,\n    hasSite: values.hasSite,\n    website: values.website,\n    achievements: values.achievements,\n    goals: values.goals,\n    challenges: values.challenges,\n    wish: values.wish,\n  };\n\n  useEffect(() => {\n    setSubmitting(true);\n    // NOTE : reroute to `/home` upon sucessful login\n    // TODO : configure functionality here for `persisted state` later on ...\n    signup(data).then((response) => {\n      console.log(response);\n      // NOTE : check that response is successful\n      if (response.status === \"success\") {\n        authenticate({\n          email: data.email,\n          password: data.password,\n        }).then((response) => {\n          if (response.status === \"success\") {\n            // NOTE : set `token`, `user`, `authenticated` state, in UserContext, upon sucessful login\n            setToken(response.data.token);\n            setUser(response.data.user);\n            setAuthenticated(true);\n            setShowOnboard(false);\n            setShowLogin(false);\n            console.log(response.data);\n            Router.push(\"/\");\n          } else {\n            console.log(response);\n            setError({ value: true, message: response.message });\n            setToken(null);\n            setAuthenticated(false);\n            setSubmitting(false);\n          }\n        });\n      } else {\n        console.log(response);\n        setError({ value: true, message: response.message });\n        setSubmitting(false);\n      }\n    });\n  }, []);\n\n  const classes = useStyles();\n\n  if (submitting) {\n    return (\n      <div className={classes.root}>\n        <div className={classes.innerWrapper}>\n          <h1 className={classes.header}>Loading</h1>\n          <p className={classes.text}>Just a Second!</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error.value) {\n    return (\n      <div className={classes.root}>\n        <div className={classes.innerWrapper}>\n          <h1 className={classes.header}>Error</h1>\n          <p className={classes.text}>\n            Something went slightly wrong, we will reach out to you by email\n            shortly!\n          </p>\n        </div>\n      </div>\n    );\n  } else {\n    return null;\n  }\n}\n\nexport default Submit;\n"]},"metadata":{},"sourceType":"module"}